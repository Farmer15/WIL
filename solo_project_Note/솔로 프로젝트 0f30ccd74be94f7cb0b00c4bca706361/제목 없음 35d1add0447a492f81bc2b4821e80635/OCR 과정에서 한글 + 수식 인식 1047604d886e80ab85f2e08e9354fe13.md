# OCR ê³¼ì •ì—ì„œ í•œê¸€ + ìˆ˜ì‹ ì¸ì‹

ë‚ ì§œ: 2024ë…„ 9ì›” 17ì¼

### í•´ê²°ê¹Œì§€ ê³¼ì •

### [OCR](../%E1%84%80%E1%85%B5%E1%84%89%E1%85%AE%E1%86%AF%20%E1%84%89%E1%85%B3%E1%84%90%E1%85%A2%E1%86%A8%207c42969c3a204219b1b3a9f6170f6d87/OCR%209565d9bde013405ca815440fa5161156.md)

í•´ë‹¹ ì¹¸ë°˜ì„ ì‚´í´ë³´ë©´ **EasyOCR(**ğŸ‘‘**)** ë¥¼ ì´ìš©í•œ OCR ê³¼ì • ì¤‘ ìˆ˜ì‹ì„ ì¸ì‹í•˜ì§€ ëª»í•˜ëŠ” ê²½ìš°ê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.

### í•´ê²°ê³¼ì •

1. ì¼ë‹¨ í•œê¸€ ë”°ë¡œ ìˆ˜ì‹ ë”°ë¡œ í•  ê³„íšì„ ì„¸ì›Œì„œ ì§„í–‰
2. ë¨¼ì ¸ í•œê¸€ ë¶€í„° **EasyOCR(ğŸ‘‘)** ì„ ì´ìš©í•´ ì´ë¯¸ì§€ë¥¼ ì½ìœ¼ë ¤ë©´ íŒŒì¼ê²½ë¡œ, OpenCV ì´ë¯¸ì§€ ê°ì²´, ë°”ì´íŠ¸ ì´ë¯¸ì§€ íŒŒì¼, ì›ì‹œ ì´ë¯¸ì§€ URL ê°€ í•„ìš”í•œë° react Native ë¥¼ ì´ìš©í•´ì„œ ì–»ì„ ìˆ˜ ìˆëŠ” ë°ì´í„° í˜•ì‹ì€ ë°ì´í„° URI ì…ë‹ˆë‹¤.
    - ë°ì´í„° URI ë€ : ì›¹ì—ì„œ ì§ì ‘ ë°ì´í„°ë¥¼ ì¸ë¼ì¸ìœ¼ë¡œ í¬í•¨í•  ìˆ˜ ìˆëŠ” URL í˜•ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ URL ë¬¸ìì—´ì— ì§ì ‘ í¬í•¨í•˜ì—¬ ì„œë²„ì™€ì˜ ë³„ë„ í†µì‹  ì—†ì´ ë°ì´í„°ë¥¼ ì›¹ í˜ì´ì§€ì—ì„œ ë°”ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ì—­í• ì„ í•˜ëŠ” URI
3. í•´ë‹¹ ë°ì´í„° URI ë¥¼ ì´ìš©í•˜ì—¬ ë¨¼ì ¸ ì´ë¯¸ì§€ íŒŒì¼ì„ ë§Œë“¤ì–´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.
4. í•´ë‹¹ ë°ì´í„° URI ë¥¼ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì„œë²„ì¸¡ìœ¼ë¡œ ì „ì†¡
    
    ```jsx
      const analyzeProblemImage = async () => {
        await axios.post(
          process.env.EXPO_PUBLIC_SERVER_URL + "problem/analyze",
          {
            imageURI,
          }
        );
      };
    ```
    
5. ë°›ì€ ì´ë¯¸ì§€ ë°ì´í„° URI ë¥¼ ì´ìš©í•´ ì´ë¯¸ì§€ íŒŒì¼ë¡œ ë§Œë“¤ì–´ì£¼ê¸°
    
    ```jsx
    @app.post("/problem/analyze")
    async def analyzeProblem(image: Image):
        base64_data = image.imageURI.split(",")[1]
        image_data = base64.b64decode(base64_data)
        output_file_path = "temp_image.jpg"
    
        with open(output_file_path, "wb") as file:
            file.write(image_data)
    ```
    
    1.  ì¸ì½”ë”© ì‹œì¼œì„œ ë³´ë‚¸ ë°ì´í„° URI ë’· ë¶€ë¶„ì„ ê°€ì ¸ì˜µë‹ˆë‹¤. 
        
        ìë£Œì— ë”°ë¥´ë©´ ë°ì´í„° URI êµ¬ì¡° (https://ko.wikipedia.org/wiki/ë°ì´í„°_URI_ìŠ¤í‚´)
        
        ```
        data:[<media type>][;base64],<data>
        ```
        
    2. í•´ë‹¹ ë¶€ë¶„ì„ ë©”ì„œë“œë¥¼ ì´ìš©í•´ `base64.b64decode` ë‹¤ì‹œ decode ì‹œì¼œì¤ë‹ˆë‹¤.
    3. with â€¦ as êµ¬ë¬¸ì„ ì´ìš©í•´ì„œ ì´ë¯¸ì§€íŒŒì¼ë¡œ ë³€í™˜ì‹œì¼œì¤ë‹ˆë‹¤.
6. ê·¸ë ‡ê²Œ ì„œë²„ í´ì–´ì— ë§Œë“¤ì–´ì§„ ì´ë¯¸ì§€ íŒŒì¼ì„ ì‚¬ìš©í•´ì¤ë‹ˆë‹¤. 
7. openCV ì‚¬ìš© ê²°ê³¼
    - ì„œë²„ì¸¡ ì½”ë“œ
        
        ```python
        reader = easyocr.Reader(["ko"])
        result = reader.readtext(
            output_file_path,   # ì•„ê¹Œ ë§Œë“¤ì–´ì¤€ ì´ë¯¸ì§€ íŒŒì¼
            detail=0,
            text_threshold=0.9,
            low_text=0.6,
        )
        print(result)
        ```
        
    - í•´ë‹¹ ë¬¸ì œ
        
        ![image.png](OCR%20%E1%84%80%E1%85%AA%E1%84%8C%E1%85%A5%E1%86%BC%E1%84%8B%E1%85%A6%E1%84%89%E1%85%A5%20%E1%84%92%E1%85%A1%E1%86%AB%E1%84%80%E1%85%B3%E1%86%AF%20+%20%E1%84%89%E1%85%AE%E1%84%89%E1%85%B5%E1%86%A8%20%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%89%E1%85%B5%E1%86%A8%201047604d886e80ab85f2e08e9354fe13/image.png)
        
    - ê²°ê³¼
        
        ![image.png](OCR%20%E1%84%80%E1%85%AA%E1%84%8C%E1%85%A5%E1%86%BC%E1%84%8B%E1%85%A6%E1%84%89%E1%85%A5%20%E1%84%92%E1%85%A1%E1%86%AB%E1%84%80%E1%85%B3%E1%86%AF%20+%20%E1%84%89%E1%85%AE%E1%84%89%E1%85%B5%E1%86%A8%20%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%89%E1%85%B5%E1%86%A8%201047604d886e80ab85f2e08e9354fe13/image%201.png)
        
        â†’ í•œê¸€ì— ëŒ€í•´ì„œëŠ” ì˜ ì¶œë ¥ì´ ë˜ì§€ë§Œ ìˆ˜ì‹ì€ ì¸ì‹í•˜ì§€ ëª»í•˜ëŠ” í•œê³„ê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.
        
8. ìœ„ì™€ ê°™ì€ ê²°ê³¼ë¥¼ ë³´ê³  ê¹Šì€ ê³ ë¯¼ì„ í•œ ê²°ê³¼ 2ê°€ì§€ ë°©ë²•ì´ ë– ì˜¬ëìŠµë‹ˆë‹¤. 
    1.  í•œê¸€ì˜ì—­ê³¼ ìˆ˜ì‹ì˜ì—­ì„ ë‚˜ëˆ„ì–´ì„œ ê°ê° ì²˜ë¦¬ ì‹œí‚¤ëŠ” ë°©ë²•
        - openCV ë¥¼ ì‚¬ìš©í•´ ìˆ˜ì‹ê³¼ í…ìŠ¤íŠ¸ ì˜ì—­ì„ ë¶„ë¦¬ì‹œì¼œì¤ë‹ˆë‹¤.
            
            ```python
            img = cv.imread("temp_image.jpg")
            
            gray = cv.cvtColor(img, cv.COLOR_BGR2GRAY)
            
            kernel = np.ones((2, 3), np.uint8)
            gray = cv.dilate(gray, kernel, iterations=1)
            gray = cv.erode(gray, kernel, iterations=2)
            
            cv.imwrite("./" + "removed_noise.png", gray)
            
            _, gray = cv.threshold(gray, 127, 255, cv.THRESH_BINARY)
            cv.imwrite("./" + "thres.png", gray)
            
            result = pytesseract.image_to_string(Image.open("./" + "thres.png"))
            
            print(result.strip())
            ```
            
            https://www.youtube.com/watch?v=fr_8_MkdH6g)
            
            ![image.png](OCR%20%E1%84%80%E1%85%AA%E1%84%8C%E1%85%A5%E1%86%BC%E1%84%8B%E1%85%A6%E1%84%89%E1%85%A5%20%E1%84%92%E1%85%A1%E1%86%AB%E1%84%80%E1%85%B3%E1%86%AF%20+%20%E1%84%89%E1%85%AE%E1%84%89%E1%85%B5%E1%86%A8%20%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%89%E1%85%B5%E1%86%A8%201047604d886e80ab85f2e08e9354fe13/image%202.png)
            
            ì´ìƒí•œ ê²°ê³¼ê°’ì´ ë‚˜ì˜´;;;
            
            â†’ ì¶”í›„ì— ì¶©ë¶„í•œ ì‹œê°„ì„ ë“¤ì—¬ì„œ openCVì— ëŒ€í•´ì„œ ê³µë¶€í•˜ê³  ë‹¤ì‹œ ë„ì „ğŸ”¥ğŸ”¥ğŸ”¥
            
        - í•œê¸€ ì˜ì—­ì— ëŒ€í•´ì„œëŠ” easyOCR ì„ ì‚¬ìš©í•´ì¤ë‹ˆë‹¤.
            
            â†’ ìœ„ì— ê²°ê³¼ê°’
            
        - ìˆ˜ì‹ì—ëŒ€í•´ì„œëŠ” ì¡°ì‚¬í•´ë³´ë‹ˆ ëŒ€ë¶€ë¶„ ë¶€ë¶„ë¬´ë£Œ ì´ê³  **Tesseract**ì„ í†µí•œ ìˆ˜ì‹ ì¸ì‹ì´ ê°€ëŠ¥í•˜ë‹¤ê³  ì¡°ì‚¬í•´ì„œ ì‚¬ìš©í•´ì¤ë‹ˆë‹¤.
            
            ```python
            pytesseract.pytesseract.tesseract_cmd = (
                r"/opt/homebrew/Cellar/tesseract/5.4.1/bin/tesseract"
            )
            
            a = Image.open("temp_image.jpg")
            result = pytesseract.image_to_string(a, lang="eng+equ")
            print(result)
            ```
            
            ![image.png](OCR%20%E1%84%80%E1%85%AA%E1%84%8C%E1%85%A5%E1%86%BC%E1%84%8B%E1%85%A6%E1%84%89%E1%85%A5%20%E1%84%92%E1%85%A1%E1%86%AB%E1%84%80%E1%85%B3%E1%86%AF%20+%20%E1%84%89%E1%85%AE%E1%84%89%E1%85%B5%E1%86%A8%20%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%89%E1%85%B5%E1%86%A8%201047604d886e80ab85f2e08e9354fe13/image%203.png)
            
            â†’ ìˆ˜ì‹ì´ í•œê¸€ê³¼ ê°™ì´ ìˆì„ ê²½ìš° ì´ìƒí•˜ê²Œ ì‘ë™í•˜ëŠ” ê²ƒì„ í™•ì¸;;;
            
            ![image.png](OCR%20%E1%84%80%E1%85%AA%E1%84%8C%E1%85%A5%E1%86%BC%E1%84%8B%E1%85%A6%E1%84%89%E1%85%A5%20%E1%84%92%E1%85%A1%E1%86%AB%E1%84%80%E1%85%B3%E1%86%AF%20+%20%E1%84%89%E1%85%AE%E1%84%89%E1%85%B5%E1%86%A8%20%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%89%E1%85%B5%E1%86%A8%201047604d886e80ab85f2e08e9354fe13/image%204.png)
            
            ![image.png](OCR%20%E1%84%80%E1%85%AA%E1%84%8C%E1%85%A5%E1%86%BC%E1%84%8B%E1%85%A6%E1%84%89%E1%85%A5%20%E1%84%92%E1%85%A1%E1%86%AB%E1%84%80%E1%85%B3%E1%86%AF%20+%20%E1%84%89%E1%85%AE%E1%84%89%E1%85%B5%E1%86%A8%20%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%89%E1%85%B5%E1%86%A8%201047604d886e80ab85f2e08e9354fe13/image%205.png)
            
            â†’ ì˜ì–´ë¡œ ë˜ì–´ ìˆëŠ” ìˆ˜ì‹ë„ ì´ì‹í•˜ì§€ ëª»í•˜ëŠ” ê²ƒì„ í™•ì¸
            
    2. ë‹¤ë¥¸ ë°©ë²•ì¸ ìœ ë£Œ APIë¥¼ ì‚¬ìš©í•˜ê¸°ë¡œ ë³€ê²½ (https://simpletex.cn/user/center)
        - í•´ë‹¹ API ë¥¼ ì‚¬ìš©í•´ì„œ ì¸ì‹ì‹œí‚¨ ê²°ê³¼
            
            ![image.png](OCR%20%E1%84%80%E1%85%AA%E1%84%8C%E1%85%A5%E1%86%BC%E1%84%8B%E1%85%A6%E1%84%89%E1%85%A5%20%E1%84%92%E1%85%A1%E1%86%AB%E1%84%80%E1%85%B3%E1%86%AF%20+%20%E1%84%89%E1%85%AE%E1%84%89%E1%85%B5%E1%86%A8%20%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%89%E1%85%B5%E1%86%A8%201047604d886e80ab85f2e08e9354fe13/image%206.png)
            
            â†’ ì •í™•íˆ ì¸ì‹ ëœê²ƒì„ í™•ì¸í• ìˆ˜ ìˆìŠµë‹ˆë‹¤.